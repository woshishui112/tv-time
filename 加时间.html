<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç”µè§†æ—¶é—´èµšå–å™¨</title>
    <style>
        :root { 
            --primary: #2c3e50; 
            --wolf: #8e44ad; 
            --fact: #2980b9; 
            --bg: #f0f3f5; 
            --card: #ffffff; 
            --green: #2ecc71;
            --red: #e74c3c;
            --orange: #f39c12;
        }
        body { font-family: 'Segoe UI', 'Microsoft YaHei', sans-serif; background: var(--bg); color: #2c3e50; margin: 0; padding: 20px; display: flex; flex-direction: column; align-items: center; min-height: 100vh; }
        
        /* é¡¶éƒ¨çœ‹æ¿ */
        header { 
            text-align: center; 
            width: 100%; 
            max-width: 600px;
            margin-bottom: 20px; 
            background: var(--primary);
            color: white;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .title-area h1 { margin: 0; font-size: 1.5rem; }
        .title-area p { margin: 5px 0 0; opacity: 0.8; font-size: 0.9rem; }
        
        .score-box { text-align: right; }
        .score-num { font-size: 2.5rem; font-weight: bold; color: var(--orange); line-height: 1; }
        .score-label { font-size: 0.8rem; opacity: 0.8; }

        /* å¯¼èˆª */
        nav { display: flex; gap: 15px; margin-bottom: 20px; }
        .nav-btn { 
            padding: 12px 25px; 
            border: none; 
            background: white; 
            border-radius: 30px; 
            cursor: pointer; 
            font-weight: bold; 
            color: #bdc3c7; 
            font-size: 1rem;
            transition: 0.2s;
            box-shadow: 0 3px 0 rgba(0,0,0,0.05);
        }
        .nav-btn.active { color: white; transform: translateY(2px); box-shadow: none; }
        .nav-btn[data-tab="fact"].active { background: var(--fact); }
        .nav-btn[data-tab="wolf"].active { background: var(--wolf); }
        
        /* å®Œæˆæ ‡è®° */
        .nav-btn.finished { opacity: 0.6; position: relative; }
        .nav-btn.finished::after { content: 'âœ”'; position: absolute; top: -5px; right: -5px; background: var(--green); color: white; border-radius: 50%; width: 20px; height: 20px; font-size: 12px; line-height: 20px; text-align: center; }

        /* ä¸»å¡ç‰‡ */
        main { width: 100%; max-width: 600px; position: relative; }
        .card { background: var(--card); padding: 25px; border-radius: 20px; box-shadow: 0 10px 25px rgba(0,0,0,0.05); display: none; animation: slideUp 0.3s; }
        .card.active { display: block; }

        @keyframes slideUp { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        /* è¿›åº¦æ¡ */
        .progress-bar-bg { background: #ecf0f1; height: 10px; border-radius: 5px; margin-bottom: 20px; overflow: hidden; }
        .progress-bar-fill { height: 100%; background: var(--green); width: 0%; transition: width 0.3s; }
        .progress-text { text-align: right; font-size: 0.8rem; color: #7f8c8d; margin-bottom: 5px; font-weight: bold; }

        /* é¢˜ç›® */
        .q-text { font-size: 1.4rem; font-weight: 700; line-height: 1.5; margin-bottom: 30px; min-height: 70px; color: #34495e; }
        
        /* æŒ‰é’®é€šç”¨ */
        .options-grid { display: grid; gap: 15px; }
        .btn-opt { 
            padding: 18px; 
            border: 2px solid #ecf0f1; 
            background: white; 
            border-radius: 12px; 
            cursor: pointer; 
            font-size: 1.1rem; 
            text-align: left; 
            transition: 0.2s; 
            font-weight: 600;
            color: #7f8c8d;
        }
        .btn-opt:hover { border-color: var(--primary); background: #f8f9fa; }
        
        /* äº‹å®è§‚ç‚¹å¤§æŒ‰é’® */
        .fact-btns { display: flex; gap: 15px; }
        .fact-btns button { flex: 1; padding: 25px; font-size: 1.3rem; border: none; border-radius: 15px; cursor: pointer; color: white; font-weight: bold; transition: transform 0.1s; }
        .fact-btns button:active { transform: scale(0.98); }
        .btn-f { background: var(--fact); box-shadow: 0 5px 0 #1f6391; }
        .btn-o { background: #e67e22; box-shadow: 0 5px 0 #ca6f1e; }

        /* åé¦ˆåŒº */
        .feedback-box { margin-top: 25px; padding: 20px; border-radius: 12px; display: none; text-align: center; }
        .feedback-box.correct { background: #e8f8f5; border: 2px solid #a2d9ce; color: #16a085; }
        .feedback-box.wrong { background: #fdedec; border: 2px solid #fadbd8; color: #c0392b; }
        .explain-text { font-size: 1rem; margin-top: 10px; text-align: left; background: rgba(255,255,255,0.7); padding: 10px; border-radius: 8px; }

        .next-btn { 
            margin-top: 20px; width: 100%; padding: 16px; 
            background: var(--primary); color: white; 
            border: none; border-radius: 12px; 
            cursor: pointer; font-size: 1.2rem; font-weight: bold;
            display: none; box-shadow: 0 4px 0 #1a252f;
        }
        .next-btn:active { transform: translateY(4px); box-shadow: none; }

        /* å…‘æ¢åˆ¸ */
        .coupon {
            background: #fff;
            border: 4px dashed var(--orange);
            text-align: center;
            padding: 30px;
        }
        .coupon-val { font-size: 4rem; font-weight: bold; color: var(--orange); margin: 10px 0; }
        .coupon-note { font-size: 1.1rem; color: #7f8c8d; margin-top: 10px; }

    </style>
</head>
<body>

<header>
    <div class="title-area">
        <h1>ğŸ“º ç”µè§†æ—¶é—´èµšå–å™¨</h1>
        <p>å¿«ä¹ç­”é¢˜ Â· è½»æ¾èµšæ—¶é—´</p>
    </div>
    <div class="score-box">
        <div class="score-label">å·²èµšæ—¶é—´</div>
        <div><span class="score-num" id="global-score">0</span> <span style="font-size:1rem">åˆ†é’Ÿ</span></div>
    </div>
</header>

<nav>
    <button class="nav-btn active" id="nav-fact" onclick="switchTab('fact')">1. ç®€å•çƒ­èº« (10é¢˜)</button>
    <button class="nav-btn" id="nav-wolf" onclick="switchTab('wolf')">2. ç‹¼äººæ€ (20é¢˜)</button>
</nav>

<main>
    <!-- æ¸¸æˆä¸»ç•Œé¢ -->
    <div id="game-card" class="card active">
        <div class="progress-text" id="progress-text">å‡†å¤‡å¼€å§‹...</div>
        <div class="progress-bar-bg">
            <div class="progress-bar-fill" id="progress-bar"></div>
        </div>

        <div id="question-area">
            <div class="q-text" id="q-text">é¢˜ç›®åŠ è½½ä¸­...</div>
            
            <!-- Fact Buttons -->
            <div class="fact-btns" id="fact-btns" style="display:none;">
                <button class="btn-f" onclick="checkAnswer('fact')">ğŸ“˜ äº‹å® (Fact)</button>
                <button class="btn-o" onclick="checkAnswer('opinion')">ğŸ“™ è§‚ç‚¹ (Opinion)</button>
            </div>

            <!-- Wolf Buttons -->
            <div class="options-grid" id="opt-btns" style="display:none;"></div>
        </div>

        <div id="feedback" class="feedback-box"></div>
        <button class="next-btn" id="next-btn" onclick="nextQuestion()">ä¸‹ä¸€é¢˜ â¡ï¸</button>
    </div>

    <!-- å…³å¡å®Œæˆç•Œé¢ -->
    <div id="done-card" class="card" style="text-align:center; padding:50px 20px;">
        <h2 style="color:var(--green); font-size:2rem;">ğŸ‰ æœ¬å…³å®Œæˆï¼</h2>
        <p style="font-size:1.2rem; color:#7f8c8d;">è¯·ç‚¹å‡»ä¸Šæ–¹æŒ‰é’®ï¼Œåˆ‡æ¢ä¸‹ä¸€ä¸ªæŒ‘æˆ˜ã€‚</p>
    </div>

    <!-- æœ€ç»ˆå…‘æ¢åˆ¸ -->
    <div id="coupon-card" class="card coupon">
        <h2 style="color:#2c3e50; margin:0;">âœ¨ ç”µè§†æ—¶é—´å…‘æ¢åˆ¸ âœ¨</h2>
        <p style="color:#bdc3c7;">VALID COUPON</p>
        <div class="coupon-val"><span id="final-score">0</span> åˆ†é’Ÿ</div>
        <div class="coupon-note">æ­å–œï¼è¯·å‘å®¶é•¿å‡ºç¤ºæ­¤å±å¹•å…‘æ¢ã€‚</div>
        <p style="margin-top:30px; font-size:0.9rem; color:#bdc3c7;">æŒ‘æˆ˜å·²ç»“æŸï¼Œä¸å¯é‡æ¥</p>
    </div>
</main>

<script>
    // ==========================================
    // â¬‡ï¸ é¢˜åº“åŒºï¼šæ–°æ‰‹å¿«ä¹ç‰ˆ (ç®€å•æœ‰è¶£)
    // ==========================================

    // 1. äº‹å® vs è§‚ç‚¹ (10é¢˜ - è´´è¿‘ç”Ÿæ´»)
    const factDB = [
        { text: "ä¸€å¹´æœ‰365å¤©ï¼ˆå¹³å¹´ï¼‰ã€‚", type: "fact", explain: "è¿™æ˜¯æ—¥å†ä¸Šçš„å¸¸è¯†ã€‚" },
        { text: "å†°æ·‡æ·‹æ˜¯ä¸–ç•Œä¸Šæœ€å¥½åƒçš„é›¶é£Ÿã€‚", type: "opinion", explain: "è¿™æ˜¯ä½ çš„æ„Ÿè§‰ï¼Œä¹Ÿè®¸æœ‰äººå–œæ¬¢åƒè¾£æ¡ã€‚" },
        { text: "ä¸­å›½çš„é¦–éƒ½æ˜¯åŒ—äº¬ã€‚", type: "fact", explain: "åœ°ç†äº‹å®ã€‚" },
        { text: "ç©æ¸¸æˆæ¯”å†™ä½œä¸šå¼€å¿ƒã€‚", type: "opinion", explain: "è™½ç„¶æˆ‘ä¹Ÿè¿™ä¹ˆè§‰å¾—ï¼Œä½†è¿™å±äºä¸»è§‚æ„Ÿå—ã€‚" },
        { text: "èœ˜è››æœ‰8æ¡è…¿ã€‚", type: "fact", explain: "ç”Ÿç‰©è¯¾ä¸Šå­¦è¿‡çš„ã€‚" },
        { text: "å†¬å¤©å¤ªå†·äº†ï¼Œä¸€ç‚¹éƒ½ä¸å¥½ç©ã€‚", type: "opinion", explain: "æœ‰äººè§‰å¾—å†¬å¤©å¯ä»¥æ»‘é›ªï¼Œå¾ˆå¥½ç©ã€‚" },
        { text: "é±¼ç”Ÿæ´»åœ¨æ°´é‡Œã€‚", type: "fact", explain: "è‡ªç„¶è§„å¾‹ã€‚" },
        { text: "è¥¿ç“œæ˜¯åœ†çš„ã€‚", type: "fact", explain: "å®¢è§‚å½¢çŠ¶ã€‚" },
        { text: "æˆ‘ä¸å–œæ¬¢åƒé’æ¤’ã€‚", type: "opinion", explain: "è¿™æ˜¯ä½ çš„å£å‘³åå¥½ã€‚" },
        { text: "ç°åœ¨æ˜¯21ä¸–çºªã€‚", type: "fact", explain: "å†å²æ—¶é—´ã€‚" }
    ];

    // 2. ç‹¼äººæ€ (20é¢˜ - å‰10é¢˜é€åˆ†ï¼Œå10é¢˜ç®€å•é€»è¾‘)
    // è§„åˆ™ï¼šç‹¼äºº=è¯´è°ï¼Œå¥½äºº=çœŸè¯
    const wolfDB = [
        // --- ç¬¬ä¸€é˜¶æ®µï¼šä¸€çœ¼å°±èƒ½çœ‹ç©¿çš„è°è¨€ (é€åˆ†é¢˜) ---
        { text: "ã€ç¬¬1é¢˜ã€‘Aè¯´ï¼š'å¤§è±¡ä¼šé£'ã€‚<br>è¯·é—®Aæ˜¯å¥½äººè¿˜æ˜¯ç‹¼äººï¼Ÿ", options: ["å¥½äºº", "ç‹¼äºº"], correct: 1, explain: "å“ˆå“ˆï¼Œå¤§è±¡æ€ä¹ˆä¼šé£å‘¢ï¼ŸAåœ¨èƒ¡è¯´å…«é“ï¼Œè‚¯å®šæ˜¯ç‹¼äººï¼" },
        { text: "ã€ç¬¬2é¢˜ã€‘Aè¯´ï¼š'ç³–æ˜¯ç”œçš„'ã€‚<br>è¯·é—®Aæ˜¯å¥½äººè¿˜æ˜¯ç‹¼äººï¼Ÿ", options: ["å¥½äºº", "ç‹¼äºº"], correct: 0, explain: "æ²¡é”™ï¼Œç³–å°±æ˜¯ç”œçš„ã€‚Aè¯´äº†çœŸè¯ï¼Œæ˜¯å¥½äººã€‚" },
        { text: "ã€ç¬¬3é¢˜ã€‘Aè¯´ï¼š'å¤ªé˜³æ˜¯å†°å—åšçš„'ã€‚<br>è¯·é—®Aæ˜¯å¥½äººè¿˜æ˜¯ç‹¼äººï¼Ÿ", options: ["å¥½äºº", "ç‹¼äºº"], correct: 1, explain: "å¤ªç¦»è°±äº†ï¼å¤ªé˜³æ˜¯ç«çƒ­çš„ã€‚Aæ˜¯ç‹¼äººã€‚" },
        { text: "ã€ç¬¬4é¢˜ã€‘Aè¯´ï¼š'å°ç‹—ä¼šæ±ªæ±ªå«'ã€‚<br>è¯·é—®Aæ˜¯å¥½äººè¿˜æ˜¯ç‹¼äººï¼Ÿ", options: ["å¥½äºº", "ç‹¼äºº"], correct: 0, explain: "è¿™æ˜¯å¸¸è¯†ï¼ŒAæ˜¯è¯šå®çš„å¥½äººã€‚" },
        { text: "ã€ç¬¬5é¢˜ã€‘Aè¯´ï¼š'æ±½è½¦æ˜¯ç”¨æ–¹å—è½®å­è·‘çš„'ã€‚<br>è¯·é—®Aæ˜¯å¥½äººè¿˜æ˜¯ç‹¼äººï¼Ÿ", options: ["å¥½äºº", "ç‹¼äºº"], correct: 1, explain: "æ–¹å—è½®å­è·‘ä¸åŠ¨å‘€ï¼ŒAåœ¨æ’’è°ï¼Œæ˜¯ç‹¼äººã€‚" },
        { text: "ã€ç¬¬6é¢˜ã€‘Aè¯´ï¼š'äººå¯ä»¥ä¸å–æ°´æ´»100å¹´'ã€‚<br>è¯·é—®Aæ˜¯å¥½äººè¿˜æ˜¯ç‹¼äººï¼Ÿ", options: ["å¥½äºº", "ç‹¼äºº"], correct: 1, explain: "å¹ç‰›ï¼äººä¸å–æ°´å‡ å¤©å°±ä¸è¡Œäº†ã€‚Aæ˜¯ç‹¼äººã€‚" },
        { text: "ã€ç¬¬7é¢˜ã€‘Aè¯´ï¼š'ä»Šå¤©æ˜¯æ˜ŸæœŸå…«'ã€‚<br>è¯·é—®Aæ˜¯å¥½äººè¿˜æ˜¯ç‹¼äººï¼Ÿ", options: ["å¥½äºº", "ç‹¼äºº"], correct: 1, explain: "æ ¹æœ¬å°±æ²¡æœ‰æ˜ŸæœŸå…«ï¼ŒAæ˜¯ç‹¼äººã€‚" },
        { text: "ã€ç¬¬8é¢˜ã€‘Aè¯´ï¼š'æˆ‘æ˜¯é€æ˜çš„ï¼Œä½ çœ‹ä¸è§æˆ‘'ã€‚<br>è¯·é—®Aæ˜¯å¥½äººè¿˜æ˜¯ç‹¼äººï¼Ÿ", options: ["å¥½äºº", "ç‹¼äºº"], correct: 1, explain: "ä½ èƒ½çœ‹è§ä»–å¯¹å§ï¼Ÿä»–åœ¨æ’’è°ã€‚" },
        { text: "ã€ç¬¬9é¢˜ã€‘Aè¯´ï¼š'åœ°çƒæ˜¯åœ†çš„'ã€‚<br>è¯·é—®Aæ˜¯å¥½äººè¿˜æ˜¯ç‹¼äººï¼Ÿ", options: ["å¥½äºº", "ç‹¼äºº"], correct: 0, explain: "è¿™æ˜¯çœŸè¯ï¼ŒAæ˜¯å¥½äººã€‚" },
        { text: "ã€ç¬¬10é¢˜ã€‘Aè¯´ï¼š'ç«æ˜¯çƒ«çš„'ã€‚<br>è¯·é—®Aæ˜¯å¥½äººè¿˜æ˜¯ç‹¼äººï¼Ÿ", options: ["å¥½äºº", "ç‹¼äºº"], correct: 0, explain: "çœŸè¯ï¼ŒAæ˜¯å¥½äººã€‚" },

        // --- ç¬¬äºŒé˜¶æ®µï¼šç¨å¾®åŠ¨ä¸€ç‚¹è„‘ç­‹ (ç®€å•é€»è¾‘) ---
        { text: "ã€ç¬¬11é¢˜ã€‘Aè¯´ï¼š'2+2=5'ã€‚<br>Bè¯´ï¼š'Aç®—é”™äº†'ã€‚<br>è¯·é—®Bæ˜¯å¥½äººè¿˜æ˜¯ç‹¼äººï¼Ÿ", options: ["å¥½äºº", "ç‹¼äºº"], correct: 0, explain: "Aç¡®å®ç®—é”™äº†ï¼ŒBæŒ‡å‡ºäº†äº‹å®ï¼Œæ‰€ä»¥Bæ˜¯å¥½äººã€‚" },
        { text: "ã€ç¬¬12é¢˜ã€‘Aè¯´ï¼š'æˆ‘æ˜¯ç‹¼äºº'ã€‚<br>è¯·é—®Aåˆ°åº•æ˜¯ä»€ä¹ˆï¼Ÿ", options: ["å¥½äºº", "ç‹¼äºº", "è¿™æ˜¯éª—äººçš„é¢˜"], correct: 2, explain: "å¥½äººä¸èƒ½æ’’è°è¯´è‡ªå·±æ˜¯ç‹¼ï¼Œç‹¼äººå¿…é¡»æ’’è°ä¸èƒ½æ‰¿è®¤è‡ªå·±æ˜¯ç‹¼ã€‚æ‰€ä»¥æ²¡äººèƒ½è¯´è¿™å¥è¯ï¼" },
        { text: "ã€ç¬¬13é¢˜ã€‘Aè¯´ï¼š'Bæ˜¯ç‹¼äºº'ã€‚<br>ç»“æœBçœŸçš„æ˜¯ç‹¼äººã€‚<br>è¯·é—®Aæ˜¯å¥½äººè¿˜æ˜¯ç‹¼äººï¼Ÿ", options: ["å¥½äºº", "ç‹¼äºº"], correct: 0, explain: "Aè¯´å¯¹äº†äº‹å®ï¼ˆçœŸè¯ï¼‰ï¼Œè¯´çœŸè¯çš„å°±æ˜¯å¥½äººã€‚" },
        { text: "ã€ç¬¬14é¢˜ã€‘Aè¯´ï¼š'æˆ‘ä»¬ä¸¤ä¸ªéƒ½æ˜¯å¥½äºº'ã€‚<br>å¯æ˜¯åœºä¸Šæ˜æ˜æœ‰ä¸€åªç‹¼ã€‚<br>è¯·é—®Aæ˜¯ä»€ä¹ˆï¼Ÿ", options: ["å¥½äºº", "ç‹¼äºº"], correct: 1, explain: "æ—¢ç„¶æœ‰ç‹¼ï¼Œå°±ä¸å¯èƒ½'éƒ½æ˜¯å¥½äºº'ã€‚Aåœ¨æ’’è°ï¼ŒAå°±æ˜¯é‚£åªç‹¼ã€‚" },
        { text: "ã€ç¬¬15é¢˜ã€‘Aè¯´ï¼š'æˆ‘æ˜¯å¥½äºº'ã€‚<br>Bè¯´ï¼š'Aåœ¨æ’’è°'ã€‚<br>è¯·é—®è°æ˜¯ç‹¼äººï¼Ÿ", options: ["A", "B", "æ— æ³•åˆ¤æ–­"], correct: 2, explain: "å¦‚æœAæ˜¯å¥½äººï¼ŒBå°±æ˜¯ç‹¼ï¼›å¦‚æœAæ˜¯ç‹¼ï¼ˆæ’’è°è¯´è‡ªå·±å¥½ï¼‰ï¼ŒBå°±æ˜¯å¥½äººã€‚ä¸¤äººéƒ½æœ‰å¯èƒ½ï¼" },
        { text: "ã€ç¬¬16é¢˜ã€‘Aè¯´ï¼š'æ‰€æœ‰çš„ä½œä¸šæˆ‘éƒ½å†™å®Œäº†'ã€‚<br>è€å¸ˆæ£€æŸ¥å‘ç°ä»–æ²¡å†™ã€‚<br>è¯·é—®Aæ˜¯ä»€ä¹ˆï¼Ÿ", options: ["å¥½äºº", "ç‹¼äºº"], correct: 1, explain: "äº‹å®è¯æ˜ä»–åœ¨æ’’è°ï¼Œæ’’è°çš„å°±æ˜¯ç‹¼äººã€‚" },
        { text: "ã€ç¬¬17é¢˜ã€‘Aè¯´ï¼š'æˆ‘æœ‰è¶…èƒ½åŠ›'ã€‚<br>Bè¯´ï¼š'Aåœ¨å¹ç‰›'ã€‚<br>è¯·é—®Bæ˜¯ä»€ä¹ˆï¼Ÿ", options: ["å¥½äºº", "ç‹¼äºº"], correct: 0, explain: "Aè‚¯å®šåœ¨å¹ç‰›ï¼ˆæ’’è°ï¼‰ã€‚Bè¯´å‡ºäº†çœŸç›¸ï¼ŒBæ˜¯å¥½äººã€‚" },
        { text: "ã€ç¬¬18é¢˜ã€‘çˆ¸çˆ¸è¯´ï¼š'å¦ˆå¦ˆæ˜¯ç‹¼äºº'ã€‚<br>å¦ˆå¦ˆè¯´ï¼š'çˆ¸çˆ¸æ˜¯ç‹¼äºº'ã€‚<br>å®¶é‡Œåªæœ‰ä¸€åªç‹¼ã€‚<br>è¯·é—®å¯èƒ½ä¸¤å¥éƒ½æ˜¯çœŸè¯å—ï¼Ÿ", options: ["å¯èƒ½", "ä¸å¯èƒ½"], correct: 1, explain: "å¦‚æœéƒ½æ˜¯çœŸè¯ï¼Œé‚£å®¶é‡Œå°±æœ‰ä¸¤åªç‹¼äº†ï¼Œä¸é¢˜ç›®çŸ›ç›¾ã€‚æ‰€ä»¥ä¸å¯èƒ½ã€‚" },
        { text: "ã€ç¬¬19é¢˜ã€‘Aè¯´ï¼š'1+1=2'ã€‚<br>Bè¯´ï¼š'Aè¯´å¾—å¯¹'ã€‚<br>è¯·é—®Bæ˜¯ä»€ä¹ˆï¼Ÿ", options: ["å¥½äºº", "ç‹¼äºº"], correct: 0, explain: "Aè¯´çš„æ˜¯çœŸè¯ã€‚BèµåŒçœŸè¯ï¼ŒBä¹Ÿæ˜¯åœ¨è¯´çœŸè¯ï¼Œæ‰€ä»¥Bæ˜¯å¥½äººã€‚" },
        { text: "ã€ç¬¬20é¢˜ã€‘Aè¯´ï¼š'æˆ‘ä»¬ä¸‰ä¸ªå…¨æ˜¯ç‹¼'ã€‚<br>è¯·é—®Aæ˜¯ä»€ä¹ˆï¼Ÿ", options: ["å¥½äºº", "ç‹¼äºº"], correct: 1, explain: "å¦‚æœAæ˜¯å¥½äººï¼Œä»–ä¸èƒ½æ’’è°è¯´è‡ªå·±æ˜¯ç‹¼ã€‚æ‰€ä»¥Aåªèƒ½æ˜¯ç‹¼ï¼ˆæ’’è°ï¼‰ã€‚" }
    ];

    // ==========================================
    // â¬‡ï¸ æ¸¸æˆé€»è¾‘
    // ==========================================

    let gameState = {
        fact: { idx: 0, list: factDB, finished: false },
        wolf: { idx: 0, list: wolfDB, finished: false }
    };
    let globalScore = 0;
    let currentTab = 'fact';

    function switchTab(tab) {
        currentTab = tab;
        
        // æ›´æ–°å¯¼èˆªæŒ‰é’®
        document.querySelectorAll('.nav-btn').forEach(btn => btn.classList.remove('active'));
        document.getElementById(tab === 'fact' ? 'nav-fact' : 'nav-wolf').classList.add('active');
        
        // éšè—ä¸éœ€è¦çš„ç•Œé¢
        document.getElementById('game-card').style.display = 'none';
        document.getElementById('done-card').style.display = 'none';
        document.getElementById('coupon-card').style.display = 'none';

        // åˆ¤æ–­æ˜¯å¦å…¨éƒ¨é€šå…³
        if (gameState.fact.finished && gameState.wolf.finished) {
            showCoupon();
            return;
        }

        // åˆ¤æ–­å½“å‰å…³å¡æ˜¯å¦å®Œæˆ
        if (gameState[tab].finished) {
            document.getElementById('done-card').style.display = 'block';
        } else {
            document.getElementById('game-card').style.display = 'block';
            renderQuestion();
        }
    }

    function renderQuestion() {
        const state = gameState[currentTab];
        const q = state.list[state.idx];
        const total = state.list.length;

        // è¿›åº¦æ›´æ–°
        document.getElementById('progress-text').innerText = `è¿›åº¦ï¼š${state.idx + 1} / ${total}`;
        document.getElementById('progress-bar').style.width = `${((state.idx)/total)*100}%`;

        // é¢˜ç›®æ˜¾ç¤º
        document.getElementById('q-text').innerHTML = q.text;
        
        // é‡ç½®çŠ¶æ€
        document.getElementById('feedback').style.display = 'none';
        document.getElementById('next-btn').style.display = 'none';
        
        // æŒ‰é’®æ˜¾ç¤ºé€»è¾‘
        const factGroup = document.getElementById('fact-btns');
        const optGroup = document.getElementById('opt-btns');

        if (currentTab === 'fact') {
            factGroup.style.display = 'flex';
            optGroup.style.display = 'none';
            // è§£é”æŒ‰é’®
            Array.from(factGroup.children).forEach(btn => {
                btn.disabled = false;
                btn.style.opacity = '1';
                btn.style.transform = 'scale(1)';
            });
        } else {
            factGroup.style.display = 'none';
            optGroup.style.display = 'grid';
            optGroup.innerHTML = ''; // æ¸…ç©º
            
            q.options.forEach((opt, i) => {
                const btn = document.createElement('button');
                btn.className = 'btn-opt';
                btn.innerText = opt;
                btn.onclick = () => checkAnswer(i, btn);
                optGroup.appendChild(btn);
            });
        }
    }

    function checkAnswer(userIndex, btnRef) {
        const state = gameState[currentTab];
        const q = state.list[state.idx];
        let isCorrect = false;

        // é”å®šä¸åˆ¤æ–­
        if (currentTab === 'fact') {
            isCorrect = (userIndex === (q.type === 'fact' ? 'fact' : 'opinion')); // é€»è¾‘ç¨å¾®ä¿®æ­£ä¸‹ä¼ å‚
            // å®é™…ä¸ŠcheckAnswerä¼ çš„æ˜¯å­—ç¬¦ä¸²'fact'/'opinion'
            isCorrect = (userIndex === q.type); 

            Array.from(document.getElementById('fact-btns').children).forEach(b => {
                b.disabled = true;
                b.style.opacity = '0.6';
            });
        } else {
            isCorrect = (userIndex === q.correct);
            Array.from(document.getElementById('opt-btns').children).forEach(b => {
                b.disabled = true;
                b.style.cursor = 'default';
            });
            // é¢œè‰²æ ‡è®°
            if (isCorrect) {
                btnRef.style.background = '#e8f8f5';
                btnRef.style.borderColor = '#2ecc71';
            } else {
                btnRef.style.background = '#fdedec';
                btnRef.style.borderColor = '#e74c3c';
                // æ˜¾ç¤ºæ­£ç¡®é¡¹
                const opts = document.getElementById('opt-btns').children;
                opts[q.correct].style.background = '#e8f8f5';
                opts[q.correct].style.borderColor = '#2ecc71';
            }
        }

        // è®¡åˆ†
        if (isCorrect) {
            globalScore += 1;
            document.getElementById('global-score').innerText = globalScore;
        }

        // åé¦ˆä¿¡æ¯
        const fb = document.getElementById('feedback');
        fb.style.display = 'block';
        fb.className = isCorrect ? 'feedback-box correct' : 'feedback-box wrong';
        fb.innerHTML = `<strong>${isCorrect ? 'ğŸ‰ ç­”å¯¹äº†ï¼ç«çœ¼é‡‘ç›ï¼' : 'ğŸ˜… å“å‘€ï¼Œç­”é”™äº†'}</strong><div class="explain-text">${q.explain}</div>`;
        
        document.getElementById('next-btn').style.display = 'block';

        // è¿›åº¦æ¡æ»¡æ ¼
        document.getElementById('progress-bar').style.width = `${((state.idx + 1)/state.list.length)*100}%`;
    }

    function nextQuestion() {
        const state = gameState[currentTab];
        state.idx++;
        
        if (state.idx >= state.list.length) {
            state.finished = true;
            document.getElementById(currentTab === 'fact' ? 'nav-fact' : 'nav-wolf').classList.add('finished');
            
            if (gameState.fact.finished && gameState.wolf.finished) {
                showCoupon();
            } else {
                document.getElementById('game-card').style.display = 'none';
                document.getElementById('done-card').style.display = 'block';
            }
        } else {
            renderQuestion();
        }
    }

    function showCoupon() {
        document.getElementById('game-card').style.display = 'none';
        document.getElementById('done-card').style.display = 'none';
        document.getElementById('coupon-card').style.display = 'block';
        document.getElementById('final-score').innerText = globalScore;
    }

    // åˆå§‹åŒ–
    renderQuestion();

</script>

</body>
</html>
